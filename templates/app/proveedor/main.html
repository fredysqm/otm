{% extends 'base.html' %}{% load staticfiles %}

{% block title %}Proveedores{% endblock %}

{% block menu %}
    {% include 'menu.html' with active_item_menu='proveedor' %}
{% endblock %}

{% block content %}
<table id="dtMain" class="table table-hover table-striped table-condensed table-sm">
    <thead>
        <tr>
            <th data-column-id="id" data-identifier="true" data-width="40px">ID</th>
            <th data-column-id="proveedor" data-width="90px">RUC</th>
            <th data-column-id="proveedor__razon_social" data-visible="false">Razon social</th>
            <th data-column-id="nombre">Nombre comercial</th>
            <th data-column-id="categoria_servicio__nombre" data-width="100px">Categoría</th>
            <th data-column-id="modalidad_pago__nombre" data-width="80px">Modalidad</th>
            <th data-column-id="localidad__nombre" data-width="150px">Localidad</th>
            <th data-column-id="direccion">Dirección</th>
            <th data-column-id="telefono_fijo" data-width="80px">Fijo</th>
            <th data-column-id="telefono_movil" data-width="90px">Movil</th>
            <th data-column-id="email" data-visible="false" data-formatter="email" data-sortable="false">Email</th>
            <th data-column-id="sitio_web" data-visible="false" data-formatter="link" data-sortable="false">Web</th>
            <th data-column-id="creado" data-visible="false" data-width="150px" data-converter="datetime">Creado</th>
            <th data-column-id="modificado" data-width="150px" data-converter="datetime">Modificado</th>
            <th data-column-id="acciones" data-width="90px" data-formatter="acciones" data-sortable="false">Acciones</th>
        </tr>
    </thead>
</table> 
{% endblock %}

{% block modals %}
<div id="fMarcaComercial" class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="max-width: 700px;" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form autocomplete="off">
                    <input type="hidden" name="id">
                    <fieldset>
                        <legend>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h5 class="modal-title">TITULO</h5>
                            <hr/>
                        </legend>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fMarcaComercial_proveedor">Proveedor</label>
                            <select class="form-control form-control-sm" data-live-search="true" id="fMarcaComercial_proveedor" name="proveedor"></select>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fMarcaComercial_nombre">Nombre comercial</label>
                            <input class="form-control form-control-sm" id="fMarcaComercial_nombre" name="nombre" type="text">
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_categoria_servicio">Categoría</label>
                                <select class="form-control form-control-sm" id="fMarcaComercial_categoria_servicio" name="categoria_servicio"></select>
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_modalidad_pago">Modalidad</label>
                                <select class="form-control form-control-sm" id="fMarcaComercial_modalidad_pago" name="modalidad_pago"></select>
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_localidad">Localidad</label>
                                <select class="form-control form-control-sm" id="fMarcaComercial_localidad" name="localidad"></select>
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_direccion">Dirección</label>
                                <input class="form-control form-control-sm" id="fMarcaComercial_direccion" name="direccion" type="text">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_telefono_fijo">Teléfono fijo</label>
                                <input class="form-control form-control-sm" id="fMarcaComercial_telefono_fijo" name="telefono_fijo" type="text">
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_telefono_movil">Telefono móvil</label>
                                <input class="form-control form-control-sm" id="fMarcaComercial_telefono_movil" name="telefono_movil" type="text">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_email">Email</label>
                                <input class="form-control form-control-sm" id="fMarcaComercial_email" name="email" type="text">
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercial_sitio_web">Web</label>
                                <input class="form-control form-control-sm" id="fMarcaComercial_sitio_web" name="sitio_web" type="text">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fMarcaComercial_observaciones">Observaciones</label>
                            <textarea class="form-control form-control-sm" id="fMarcaComercial_observaciones" name="observaciones" rows="3"></textarea>
                            <div class="invalid-feedback"></div>
                        </div>
                        <button class="btn btn-secondary float-left" data-dismiss="modal"><i class="far fa-times-circle"></i> Cancelar</button>
                        <button id="fMarcaComercial_submit" class="btn btn-primary float-right"><i class="far fa-save"></i> Guardar</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="fMarcaComercialDelete" class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="max-width: 500px;" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form autocomplete="off">
                    <input type="hidden" name="id">
                    <fieldset>
                        <legend>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h5 class="modal-title"><i class="far fa-trash-alt"></i> Eliminar marca comercial</h5>
                            <hr/>
                        </legend>
                        <div class="alert alert-dismissible alert-danger detail">
                            No se puede eliminar está marca comercial porque esta siendo utilizada por otros módulos del sistema.
                        </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm">¿Está seguro(a) que desea eliminar esta marca comercial?</label>
                        </div>
                        <button class="btn btn-secondary float-left" data-dismiss="modal"><i class="far fa-times-circle"></i> Cancelar</button>
                        <button id="fMarcaComercialDelete_submit" class="btn btn-danger float-right"><i class="far fa-trash-alt"></i> Eliminar</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="fProveedor" class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="max-width: 500px;" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form autocomplete="off">
                    <fieldset>
                        <legend>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h5 class="modal-title">TITULO</h5>
                            <hr/>
                        </legend>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fProveedor_tipo_documento">Tipo de documento</label>
                            <select class="form-control form-control-sm" id="fProveedor_tipo_documento" name="tipo_documento"></select>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fProveedor_id">Número de documento</label>
                            <input class="form-control form-control-sm" id="fProveedor_id" name="id" type="text">
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fProveedor_razon_social">Razón social</label>
                            <input class="form-control form-control-sm" id="fProveedor_razon_social" name="razon_social" type="text">
                            <div class="invalid-feedback"></div>
                        </div>
                        <button class="btn btn-secondary float-left" data-dismiss="modal"><i class="far fa-times-circle"></i> Cancelar</button>
                        <button id="fProveedor_submit" class="btn btn-primary float-right"><i class="far fa-save"></i> Guardar</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="fMarcaComercialCuentaList" class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="max-width: 1050px;" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <legend>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h5 class="modal-title"><i class="fas fa-piggy-bank"></i> Cuentas de la marca comercial</h5>
                    <hr/>
                </legend>
                <dl class="row">
                </dl>
                <table id="dtCuentas" class="table table-hover table-striped table-condensed table-sm">
                    <thead>
                        <tr>
                            <th data-column-id="id" data-identifier="true" data-width="40px">ID</th>
                            <th data-column-id="banco__nombre">Banco</th>
                            <th data-column-id="moneda" data-width="40px">Moneda</th>
                            <th data-column-id="tipo_cuenta" data-width="40px">Tipo</th>
                            <th data-column-id="cta" data-width="160px">Cuenta</th>
                            <th data-column-id="titular">Titular</th>
                            <th data-column-id="cci" data-visible="false">CCI</th>
                            <th data-column-id="creado" data-visible="false" data-width="150px" data-converter="datetime">Creado</th>
                            <th data-column-id="modificado" data-width="150px" data-converter="datetime">Modificado</th>
                            <th data-column-id="acciones" data-width="65px" data-formatter="acciones" data-sortable="false">Acciones</th>
                        </tr>
                    </thead>
                </table> 
            </div>
        </div>
    </div>
</div>
<div id="fMarcaComercialCuenta" class="modal" tabindex="-1" role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog" style="max-width: 700px;" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <form autocomplete="off">
                    <input type="hidden" name="id">
                    <input type="hidden" name="marca_comercial">
                    <fieldset>
                        <legend>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <h5 class="modal-title">TITULO</h5>
                            <hr />
                        </legend>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_banco">Banco</label>
                            <select class="form-control form-control-sm" data-live-search="true" id="fMarcaComercialCuenta_banco" name="banco"></select>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="form-row">
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_moneda">Moneda</label>
                                <select class="form-control form-control-sm" id="fMarcaComercialCuenta_moneda" name="moneda"></select>
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col">
                                <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_tipo_cuenta">Tipo cuenta</label>
                                <select class="form-control form-control-sm" id="fMarcaComercialCuenta_tipo_cuenta" name="tipo_cuenta"></select>
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>
                        <div class="form-row">
                                <div class="col">
                                    <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_cta">Nro Cuenta</label>
                                    <input class="form-control form-control-sm" id="fMarcaComercialCuenta_cta" name="cta" type="text">
                                    <div class="invalid-feedback"></div>
                                </div>
                                <div class="col">
                                    <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_cci">Nro CCI</label>
                                    <input class="form-control form-control-sm" id="fMarcaComercialCuenta_cci" name="cci" type="text">
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                        <div class="form-group">
                            <label class="col-form-label col-form-label-sm" for="fMarcaComercialCuenta_titular">Titular</label>
                            <input class="form-control form-control-sm" id="fMarcaComercialCuenta_titular" name="titular" type="text">
                            <div class="invalid-feedback"></div>
                        </div>
                        <button class="btn btn-secondary float-left" data-dismiss="modal"><i class="far fa-times-circle"></i> Cancelar</button>
                        <button id="fMarcaComercialCuenta_submit" class="btn btn-primary float-right"><i class="far fa-save"></i> Guardar</button>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
$(document).ajaxStop($.unblockUI);

$.ajaxSetup({
    cache: false,
    contentType: "application/json",
    beforeSend: function(xhr, settings) {
        if (!$.fn.csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", $.fn.getCookie("csrftoken"));
        }
    }
});

/*marca comercial*/
function fMarcaComercialShow(id) {
    var dialog = $("#fMarcaComercial");
    var form = $(dialog).find("form");
    var title = $(form).find("h5");

    $(form)[0].reset();
    $(form).resetValidation();
    $(form).find("[name=id]").val(0);
    $(form).find("[name=proveedor]").fillItems("/api/v1/proveedor/?page_size=100", "id", "razon_social");
    $(form).find("[name=categoria_servicio]").fillItems("/api/v1/categoria_servicio/?page_size=100", "id", "nombre");
    $(form).find("[name=modalidad_pago]").fillItems("/api/v1/modalidad_pago/?page_size=100", "id", "nombre");
    $(form).find("[name=localidad]").fillItems("/api/v1/localidad/?page_size=100", "id", "nombre");
    
    if ( id==0 ) {
        $(title).html("<i class=\"far fa-file\"></i> Nueva marca comercial");
    } else {
        $(form).fillForm("/api/v1/marca_comercial/" + id + "/");
        $(title).html("<i class=\"far fa-edit\"></i> Modificar marca comercial");
    }
    
    $(dialog).modal("show");
    $(form).find("[name=proveedor]").focus();
}

function fMarcaComercialSync() {
    var dialog = $("#fMarcaComercial");
    var form = $(dialog).find("form");

    var id = $(form).find("[name=id]").val();
    var form_data = $(form).getJSONdata();
    var base_url = "/api/v1/marca_comercial/";

    $(form).resetValidation();

    if ( id==0 ) {
        $.ajax({
            type: "POST",
            data: form_data,
            url: base_url,
            success: function(data){ $("#dtMain").bootgrid("reload"); $(dialog).modal("hide"); },
            error: function (jqXHR) { $(form).validateFromJSON(jqXHR.responseJSON); },
        });
    } else {
        $.ajax({
            type: "PUT",
            data: form_data,
            url: base_url + id + "/",
            success: function(data){ $("#dtMain").bootgrid("reload"); $(dialog).modal("hide"); },
            error: function (jqXHR) { $(form).validateFromJSON(jqXHR.responseJSON); },
        });
    }
}

function fMarcaComercialDeleteShow(id) {
    var dialog = $("#fMarcaComercialDelete");
    var form = $(dialog).find("form");
    var detail = $(form).find(".detail");

    $(detail).hide();
    $(form).find("[name=id]").val(id);
    $(dialog).modal("show");
}

function fMarcaComercialDeleteSync() {
    var dialog = $("#fMarcaComercialDelete");
    var form = $(dialog).find("form");
    var detail = $(form).find(".detail");
    var id = $(form).find("[name=id]").val();

    $.ajax({
        type: "DELETE",
        data: $(form).getJSONdata(),
        url: "/api/v1/marca_comercial/" + id + "/",
        success: function(data){ $("#dtMain").bootgrid("reload"); $(dialog).modal('hide'); },
        error: function (jqXHR) { $(form).validateFromJSON(jqXHR.responseJSON); $(detail).show();},
     });
}

/*proveedor*/
function fProveedorShow(id) {
    var dialog = $("#fProveedor");
    var form = $(dialog).find("form");
    var title = $(form).find("h5");

    $(form)[0].reset();
    $(form).resetValidation();
    $(form).find("[name=tipo_documento]").fillItems("/api/v1/tipo_doc_proveedor/?page_size=100", "id", "nombre");
    
    $(title).html("<i class=\"far fa-file\"></i> Nuevo proveedor");
    $(dialog).modal("show");
    $(form).find("[name=tipo_documento]").focus();
}

function fProveedorSync() {
    var dialog = $("#fProveedor");
    var form = $(dialog).find("form");

    $(form).resetValidation();

    $.ajax({
        type: "POST",
        data: $(form).getJSONdata(),
        url: "/api/v1/proveedor/",
        success: function(data){ $("#dtMain").bootgrid("reload"); $(dialog).modal('hide'); },
        error: function (jqXHR) { $(form).validateFromJSON(jqXHR.responseJSON); },
    });
}

/*marca comercial cuentas*/
function fMarcaComercialCuentaListShow(id) {
    var dialog = $("#fMarcaComercialCuentaList");
    var detalle = $(dialog).find("dl");
    
    detalle.empty();

    $.ajax({
        type: "GET",
        url: "/api/v1/marca_comercial/" + id + "/",
        success: function(data){
            detalle.append("<dt class=\"col-sm-2\">Proveedor:</dt><dd class=\"col-sm-10\">" + data.proveedor__razon_social + " <small>(id: " + data.proveedor + ")</small></dd>");
            detalle.append("<dt class=\"col-sm-2\">Marca comercial:</dt><dd class=\"col-sm-10\">" + data.nombre + " <small>(id: " + data.id + ")</small></dd>");
            detalle.append("<dt class=\"col-sm-2\">Modalidad pago:</dt><dd class=\"col-sm-10\">" + data.modalidad_pago__nombre + "</dd>");
            detalle.append("<dt class=\"col-sm-2\">Categoría servicio:</dt><dd class=\"col-sm-10\">" + data.categoria_servicio__nombre + "</dd>");
            detalle.append("<dt class=\"col-sm-2\">Localidad:</dt><dd class=\"col-sm-10\">" + data.localidad__nombre + "</dd>");
        }
    });

    $("#dtCuentas").bootgrid("destroy");
    var dtCuentas = $("#dtCuentas").bootgrid({
        rowCount: -1,
        url: function () {
            return "/api/v1/marca_comercial_cuenta/?marca_comercial=" + id + "&page_size=100";
        },
        templates: {
            search: "",
            pagination: "",
        },
        searchSettings: {
            fulltext: false,
        },
        formatters: {
            "acciones": function(column, row) {
                return "<button type=\"button\" class=\"btn btn-xs btn-outline-warning command-edit\" data-row-id=\"" + row.id + "\"><i class=\"far fa-edit\"></i></button> " +
                "<button type=\"button\" class=\"btn btn-xs btn-outline-danger command-delete\" data-row-id=\"" + row.id + "\"><i class=\"far fa-trash-alt\"></i></button>";
            }
        },
        converters: {
            datetime: {
                from: function (value) { return moment(value); },
                to: function (value) { return moment(value).format("DD/MMM/YYYY hh:mm A"); }
            },
        }
    }).on("loaded.rs.jquery.bootgrid", function() {
        dtCuentas.find(".command-edit").on("click", function(e) {
            //fMarcaComercialCuentaShow( $(this).data("row-id") );
        }).end().find(".command-delete").on("click", function(e) {
            //fMarcaComercialDelete( $(this).data("row-id") );
        });
    });

    $("#dtCuentas").prev().find(".gridToolbar").append('<button id="bNuevaMarcaComercialCuenta" class="btn btn-primary" type="button"><i class="far fa-file"></i> Nueva cuenta</button> ');

    $("#bNuevaMarcaComercialCuenta").on("click", function(event) {
        //$.blockUI({ message: $("#dWaitMessage") });
        event.preventDefault();
        fMarcaComercialCuentaShow( id );
    });

    $(dialog).modal("show");
}

function fMarcaComercialCuentaShow(id) {
    var dialog = $("#fMarcaComercialCuenta");
    var form = $(dialog).find("form");
    var title = $(form).find("h5");

    $(form)[0].reset();
    $(form).resetValidation();
    $(form).find("[name=id]").val(0);
    $(form).find("[name=proveedor]").fillItems("/api/v1/proveedor/?page_size=100", "id", "razon_social");
    $(form).find("[name=categoria_servicio]").fillItems("/api/v1/categoria_servicio/?page_size=100", "id", "nombre");
    $(form).find("[name=modalidad_pago]").fillItems("/api/v1/modalidad_pago/?page_size=100", "id", "nombre");
    $(form).find("[name=localidad]").fillItems("/api/v1/localidad/?page_size=100", "id", "nombre");
    
    if ( id==0 ) {
        $(title).html("<i class=\"far fa-file\"></i> Nueva marca comercial");
    } else {
        $(form).fillForm("/api/v1/marca_comercial/" + id + "/");
        $(title).html("<i class=\"far fa-edit\"></i> Modificar marca comercial");
    }
    
    $(dialog).modal("show");
    $(form).find("[name=proveedor]").focus();
}


$(document).ready(function() {
    /*$("#fMarcaComercial").bind("keypress", function (e) {
        if (e.keyCode == 13) {
            return false;
        }
    });*/

    var dtMain = $("#dtMain").bootgrid({
        url: "/api/v1/marca_comercial/",
        searchSettings: {
            fulltext: false,
        },
        formatters: {
            "email": function(column, row) {
                if (row.email != "")
                    return "<a href=\"mailto:" + row.email + "\"><i class=\"far fa-envelope\"></i> " + row.email + "</a>";
            },
            "link": function(column, row) {
                if (row.sitio_web != "")
                    return "<a target=\"_blank\" href=\"" + row.sitio_web + "\"><i class=\"fas fa-external-link-alt\"></i> " + row.sitio_web + "</a>";
            },
            "acciones": function(column, row) {
                return "<button type=\"button\" class=\"btn btn-xs btn-outline-primary command-bank\" data-row-id=\"" + row.id + "\"><i class=\"fas fa-piggy-bank\"></i></button> " +
                "<button title=\"Hello World!\" type=\"button\" class=\"btn btn-xs btn-outline-warning command-edit\" data-row-id=\"" + row.id + "\"><i class=\"far fa-edit\"></i></button> " +
                "<button type=\"button\" class=\"btn btn-xs btn-outline-danger command-delete\" data-row-id=\"" + row.id + "\"><i class=\"far fa-trash-alt\"></i></button>";
            }
        },
        converters: {
            datetime: {
                from: function (value) { return moment(value); },
                to: function (value) { return moment(value).format("DD/MMM/YYYY hh:mm A"); }
            },
        }
    }).on("loaded.rs.jquery.bootgrid", function() {
        dtMain.find(".command-bank").on("click", function(e) {
            $.blockUI({ message: $('#dWaitMessage'), });
            fMarcaComercialCuentaListShow( $(this).data("row-id") );
        }).end().find(".command-edit").on("click", function(e) {
            $.blockUI({ message: $('#dWaitMessage'), });
            fMarcaComercialShow( $(this).data("row-id") );
        }).end().find(".command-delete").on("click", function(e) {
            fMarcaComercialDeleteShow( $(this).data("row-id") );
        });
    });

    $("#dtMain").prev().find(".gridToolbar").append('<button id="bNuevoProveedor" class="btn btn-primary" type="button"><i class="far fa-file"></i> Nuevo proveedor</button> ');
    $("#dtMain").prev().find(".gridToolbar").append('<button id="bNuevaMarcaComercial" class="btn btn-primary" type="button"><i class="far fa-file"></i> Nueva marca comercial</button> ');


    $("#bNuevaMarcaComercial").on("click", function(event) {
        $.blockUI({ message: $("#dWaitMessage") });
        event.preventDefault();
        fMarcaComercialShow( 0 );
    });

    $("#fMarcaComercial_submit").on("click", function(event) {
        $.blockUI({ message: $("#dWaitMessage"), });
        event.preventDefault();
        fMarcaComercialSync();
    });

    $("#fMarcaComercialDelete_submit").on("click", function(event) {
        $.blockUI({ message: $("#dWaitMessage"), });
        event.preventDefault();
        fMarcaComercialDeleteSync();
    });

    $("#bNuevoProveedor").on("click", function(event) {
        $.blockUI({ message: $("#dWaitMessage") });
        event.preventDefault();
        fProveedorShow( 0 );
    });

    $('#fProveedor_submit').on('click', function(event) {
        $.blockUI({ message: $('#dWaitMessage'), });
        event.preventDefault();
        fProveedorSync();
    });

});


</script>
{% endblock %}