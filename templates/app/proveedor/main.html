{% extends 'base.html' %}{% load staticfiles %}

{% block title %}Proveedores{% endblock %}

{% block menu %}
    {% include 'menu.html' with active_item_menu='proveedor' %}
{% endblock %}

{% block content %}
<table id="grid-data" class="table table-striped table-hover table-condensed table-sm">
    <thead>
        <tr>
            <th data-column-id="id" data-identifier="true" data-width="60px">ID</th>
            <th data-column-id="proveedor" data-width="90px">RUC</th>
            <th data-column-id="proveedor__razon_social" data-visible="false">Razon social</th>
            <th data-column-id="nombre">Nombre comercial</th>
            <th data-column-id="categoria_servicio__nombre" data-width="100px">Categoría</th>
            <th data-column-id="modalidad_pago__nombre" data-width="80px">Modalidad</th>
            <th data-column-id="localidad__nombre" data-width="150px">Localidad</th>
            <th data-column-id="direccion">Dirección</th>
            <th data-column-id="telefono_fijo" data-width="80px">Fijo</th>
            <th data-column-id="telefono_movil" data-width="90px">Movil</th>
            <th data-column-id="email" data-visible="false" data-formatter="email" data-sortable="false">Email</th>
            <th data-column-id="sitio_web" data-visible="false" data-formatter="link" data-sortable="false">Web</th>
            <th data-column-id="creado" data-visible="false" data-width="150px" data-converter="datetime">Creado</th>
            <th data-column-id="modificado" data-width="150px" data-converter="datetime">Modificado</th>
            <th data-column-id="acciones" data-width="120px" data-formatter="acciones" data-sortable="false">Acciones</th>
        </tr>
    </thead>
</table> 
{% endblock %}

{% block modals %}
<div id="myModal" class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                    <form>
                            <div class="form-group row">
                              <label class="col-4 col-form-label" for="proveedor">Proveedor</label> 
                              <div class="col-8">
                                <select id="proveedor" name="proveedor" class="selectpicker" data-live-search="true">
                                  <option value="rabbit">Rabbit</option>
                                  <option value="duck">Duck</option>
                                  <option value="fish">Fish</option>
                                </select>
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="nombre" class="col-4 col-form-label">Nombre</label> 
                              <div class="col-8">
                                <input id="nombre" name="nombre" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="categoria_servicio" class="col-4 col-form-label">Categoría</label> 
                              <div class="col-8">
                                <select id="categoria_servicio" name="categoria_servicio" class="custom-select">
                                  <option value="rabbit">Rabbit</option>
                                  <option value="duck">Duck</option>
                                  <option value="fish">Fish</option>
                                </select>
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="localidad" class="col-4 col-form-label">Localidad</label> 
                              <div class="col-8">
                                <select id="localidad" name="localidad" class="custom-select">
                                  <option value="rabbit">Rabbit</option>
                                  <option value="duck">Duck</option>
                                  <option value="fish">Fish</option>
                                </select>
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="modalidad_pago" class="col-4 col-form-label">Modalidad</label> 
                              <div class="col-8">
                                <select id="modalidad_pago" name="modalidad_pago" class="custom-select">
                                  <option value="rabbit">Rabbit</option>
                                  <option value="duck">Duck</option>
                                  <option value="fish">Fish</option>
                                </select>
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="direccion" class="col-4 col-form-label">Dirección</label> 
                              <div class="col-8">
                                <input id="direccion" name="direccion" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="telefono_fijo" class="col-4 col-form-label">Telefono fijo</label> 
                              <div class="col-8">
                                <input id="telefono_fijo" name="telefono_fijo" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="telefono_movil" class="col-4 col-form-label">Telefono movil</label> 
                              <div class="col-8">
                                <input id="telefono_movil" name="telefono_movil" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="email" class="col-4 col-form-label">Email</label> 
                              <div class="col-8">
                                <input id="email" name="email" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="sitio_web" class="col-4 col-form-label">Web</label> 
                              <div class="col-8">
                                <input id="sitio_web" name="sitio_web" class="form-control here" type="text">
                              </div>
                            </div>
                            <div class="form-group row">
                              <label for="observaciones" class="col-4 col-form-label">Observaciones</label> 
                              <div class="col-8">
                                <textarea id="observaciones" name="observaciones" cols="40" rows="5" class="form-control"></textarea>
                              </div>
                            </div> 
                            <div class="form-group row">
                              <div class="offset-4 col-8">
                                <button name="submit" type="submit" class="btn btn-primary">Submit</button>
                              </div>
                            </div>
                          </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary float-left" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary float-right">Save changes</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
$(document).ready(function() {
    var grid = $("#grid-data").bootgrid({
        url: "/api/v1/marca_comercial/",
        searchSettings: {
            fulltext: false,
        },
        formatters: {
            "email": function(column, row) {
                if (row.email != "")
                    return "<a href=\"mailto:" + row.email + "\"><i class=\"far fa-envelope\"></i> " + row.email + "</a>";
            },
            "link": function(column, row) {
                if (row.sitio_web != "")
                    return "<a target=\"_blank\" href=\"" + row.sitio_web + "\"><i class=\"fas fa-external-link-alt\"></i> " + row.sitio_web + "</a>";
            },
            "acciones": function(column, row) {
                return "<button type=\"button\" class=\"btn btn-xs btn-success command-detail\" data-row-id=\"" + row.id + "\"><i class=\"fas fa-info-circle\"></i></button> " +
                "<button type=\"button\" class=\"btn btn-xs btn-primary command-bank\" data-row-id=\"" + row.id + "\"><i class=\"fas fa-piggy-bank\"></i></button> " +
                "<button type=\"button\" class=\"btn btn-xs btn-warning command-edit\" data-row-id=\"" + row.id + "\"><i class=\"far fa-edit\"></i></button> " +
                "<button type=\"button\" class=\"btn btn-xs btn-danger command-delete\" data-row-id=\"" + row.id + "\"><i class=\"far fa-trash-alt\"></i></button>";
            }
        },
        converters: {
            datetime: {
                from: function (value) { return moment(value); },
                to: function (value) { return moment(value).format("DD/MMM/YYYY hh:mm A"); }
            },
        }
    }).on("loaded.rs.jquery.bootgrid", function() {
        grid.find(".command-edit").on("click", function(e){
            $('#myModal').modal('show');
        }).end().find(".command-delete").on("click", function(e) {
            alert("You pressed delete on row: " + $(this).data("row-id"));
        }).end().find(".command-bank").on("click", function(e) {
            alert("You pressed bank on row: " + $(this).data("row-id"));
        }).end().find(".command-detail").on("click", function(e) {
            alert("You pressed detail on row: " + $(this).data("row-id"));
        });
    });
});
</script>
{% endblock %}